<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_e24422e03a56ba411a39d3d7d049b382 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    <script src="https://cdn.jsdelivr.net/gh/python-visualization/folium@main/folium/templates/leaflet_heat.min.js"></script>
</head>
<body>
    
    
    <div id="coord-select-container" style="position: fixed; top: 10px; left: 50%; z-index: 9999; background: white; padding: 5px;">
        <select id="coord-select" onchange="updateHeatmap()">
            <option value="">Select a coordinate</option>
<option value="41.5,-68.5">41.5,-68.5</option><option value="29.5,-92.5">29.5,-92.5</option><option value="8.5,-79.5">8.5,-79.5</option><option value="30.5,-96.5">30.5,-96.5</option><option value="9.5,-81.5">9.5,-81.5</option><option value="8.5,-81.5">8.5,-81.5</option><option value="9.5,-82.5">9.5,-82.5</option><option value="10.5,-82.5">10.5,-82.5</option><option value="8.5,-82.5">8.5,-82.5</option><option value="9.5,-83.5">9.5,-83.5</option><option value="10.5,-83.5">10.5,-83.5</option><option value="11.5,-83.5">11.5,-83.5</option><option value="10.5,-84.5">10.5,-84.5</option><option value="11.5,-84.5">11.5,-84.5</option><option value="12.5,-84.5">12.5,-84.5</option><option value="14.5,-83.5">14.5,-83.5</option><option value="13.5,-84.5">13.5,-84.5</option><option value="11.5,-85.5">11.5,-85.5</option><option value="12.5,-85.5">12.5,-85.5</option><option value="14.5,-84.5">14.5,-84.5</option><option value="13.5,-85.5">13.5,-85.5</option><option value="15.5,-84.5">15.5,-84.5</option><option value="12.5,-86.5">12.5,-86.5</option><option value="14.5,-85.5">14.5,-85.5</option><option value="13.5,-86.5">13.5,-86.5</option><option value="21.5,-86.5">21.5,-86.5</option><option value="21.5,-87.5">21.5,-87.5</option><option value="21.5,-88.5">21.5,-88.5</option><option value="15.5,-85.5">15.5,-85.5</option><option value="16.5,-84.5">16.5,-84.5</option><option value="14.5,-86.5">14.5,-86.5</option><option value="13.5,-87.5">13.5,-87.5</option><option value="15.5,-86.5">15.5,-86.5</option><option value="20.5,-86.5">20.5,-86.5</option><option value="20.5,-87.5">20.5,-87.5</option><option value="20.5,-85.5">20.5,-85.5</option><option value="19.5,-95.5">19.5,-95.5</option><option value="14.5,-87.5">14.5,-87.5</option><option value="13.5,-88.5">13.5,-88.5</option><option value="15.5,-87.5">15.5,-87.5</option><option value="14.5,-88.5">14.5,-88.5</option><option value="18.5,-94.5">18.5,-94.5</option><option value="19.5,-86.5">19.5,-86.5</option><option value="19.5,-87.5">19.5,-87.5</option><option value="19.5,-88.5">19.5,-88.5</option><option value="18.5,-93.5">18.5,-93.5</option><option value="18.5,-95.5">18.5,-95.5</option><option value="17.5,-86.5">17.5,-86.5</option><option value="16.5,-87.5">16.5,-87.5</option><option value="18.5,-91.5">18.5,-91.5</option><option value="15.5,-88.5">15.5,-88.5</option><option value="18.5,-90.5">18.5,-90.5</option><option value="17.5,-87.5">17.5,-87.5</option><option value="14.5,-89.5">14.5,-89.5</option><option value="16.5,-88.5">16.5,-88.5</option><option value="18.5,-87.5">18.5,-87.5</option><option value="18.5,-88.5">18.5,-88.5</option><option value="17.5,-95.5">17.5,-95.5</option><option value="17.5,-92.5">17.5,-92.5</option><option value="15.5,-89.5">15.5,-89.5</option><option value="17.5,-91.5">17.5,-91.5</option><option value="17.5,-90.5">17.5,-90.5</option><option value="17.5,-88.5">17.5,-88.5</option><option value="14.5,-90.5">14.5,-90.5</option><option value="16.5,-89.5">16.5,-89.5</option><option value="17.5,-89.5">17.5,-89.5</option><option value="16.5,-93.5">16.5,-93.5</option><option value="16.5,-92.5">16.5,-92.5</option><option value="15.5,-90.5">15.5,-90.5</option><option value="16.5,-91.5">16.5,-91.5</option><option value="16.5,-90.5">16.5,-90.5</option><option value="15.5,-91.5">15.5,-91.5</option>
        </select>
    </div>

    <script type="text/javascript">
        // Функция для обновления тепловой карты
        function updateHeatmap() {
            var coord = document.getElementById("coord-select").value;
            if (coord) {
                fetch(`/heatmap?coord=${coord}`)
                    .then(response => response.json())
                    .then(data => {
                        var points = data.points;
                        var max_abundance = data.max_abundance;

                        var heatmapData = points.map(function(point) {
                            return [point[0], point[1], point[2]];
                        });

                        // Очистить текущую тепловую карту
                        if (window.heatmapLayer) {
                            window.map.removeLayer(window.heatmapLayer);
                        }

                        // Добавляем новую тепловую карту
                        window.heatmapLayer = L.heatLayer(heatmapData, {
                            radius: 8,
                            blur: 5,
                            gradient: {
                                0.0: "white",
                                "0.1": "lightyellow",
                                "0.2": "yellow",
                                "0.3": "orange",
                                "0.4": "darkorange",
                                "0.5": "red",
                                "1.0": "darkred"
                            }
                        }).addTo(window.map);
                    });
            }
        }

        // Инициализация тепловой карты для первой координаты
        document.addEventListener("DOMContentLoaded", function() {
            var firstCoord = document.getElementById("coord-select").value;
            if (firstCoord) {
                updateHeatmap();
            }
        });
    </script>
    
            <div class="folium-map" id="map_e24422e03a56ba411a39d3d7d049b382" ></div>
        
</body>
<script>
    
    
            var map_e24422e03a56ba411a39d3d7d049b382 = L.map(
                "map_e24422e03a56ba411a39d3d7d049b382",
                {
                    center: [20.0, 0.0],
                    crs: L.CRS.EPSG3857,
                    ...{
  "zoom": 2,
  "zoomControl": true,
  "preferCanvas": false,
}

                }
            );

            

        
    
            var tile_layer_853ba66ffc2d405ab60adba14a8ead7d = L.tileLayer(
                "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
                {
  "minZoom": 0,
  "maxZoom": 19,
  "maxNativeZoom": 19,
  "noWrap": false,
  "attribution": "\u0026copy; \u003ca href=\"https://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors",
  "subdomains": "abc",
  "detectRetina": false,
  "tms": false,
  "opacity": 1,
}

            );
        
    
            tile_layer_853ba66ffc2d405ab60adba14a8ead7d.addTo(map_e24422e03a56ba411a39d3d7d049b382);
        
    
            var heat_map_53bc0afccbf862f9bfade00b08ea0c97 = L.heatLayer(
                [[41.5, -69.5, 0.0], [42.5, -69.5, 0.0], [41.5, -70.5, 0.0], [42.5, -70.5, 0.0], [43.5, -68.5, 0.0], [43.5, -69.5, 0.0], [41.5, -71.5, 0.0], [42.5, -71.5, 0.0], [40.5, -71.5, 0.0], [43.5, -70.5, 0.0], [43.5, -71.5, 0.0], [41.5, -72.5, 0.0], [44.5, -68.5, 0.0], [44.5, -69.5, 0.0], [44.5, -67.5, 0.0], [42.5, -72.5, 0.0], [40.5, -72.5, 0.0], [44.5, -66.5, 0.0], [44.5, -70.5, 0.0], [43.5, -72.5, 0.0], [44.5, -65.5, 0.0], [44.5, -71.5, 0.0], [41.5, -73.5, 0.0], [42.5, -73.5, 0.0], [40.5, -73.5, 0.0], [45.5, -68.5, 0.0], [45.5, -69.5, 0.0], [45.5, -67.5, 0.0], [44.5, -72.5, 0.0], [43.5, -73.5, 0.0], [45.5, -70.5, 0.0], [45.5, -66.5, 0.0], [39.5, -73.5, 0.0], [41.5, -74.5, 0.0], [45.5, -65.5, 0.0], [45.5, -71.5, 0.0], [42.5, -74.5, 0.0], [40.5, -74.5, 0.0], [44.5, -73.5, 0.0], [43.5, -74.5, 0.0], [38.5, -73.5, 0.0], [45.5, -72.5, 0.0], [39.5, -74.5, 0.0], [46.5, -68.5, 0.0], [46.5, -69.5, 0.0], [46.5, -67.5, 0.0], [46.5, -70.5, 0.0], [41.5, -75.5, 0.0], [42.5, -75.5, 0.0], [44.5, -74.5, 0.0], [40.5, -75.5, 0.0], [45.5, -73.5, 0.0], [46.5, -71.5, 0.0], [38.5, -74.5, 0.0], [43.5, -75.5, 0.0], [39.5, -75.5, 0.0], [46.5, -72.5, 0.0], [45.5, -74.5, 0.0], [44.5, -75.5, 0.0], [41.5, -76.5, 0.0], [42.5, -76.5, 0.0], [47.5, -69.5, 0.0], [47.5, -67.5, 0.0], [37.5, -74.5, 0.0], [40.5, -76.5, 0.0], [38.5, -75.5, 0.0], [46.5, -73.5, 0.0], [43.5, -76.5, 0.0], [39.5, -76.5, 0.0], [45.5, -75.5, 0.0], [44.5, -76.5, 0.0], [46.5, -74.5, 0.0], [37.5, -75.5, 0.0], [41.5, -77.5, 0.0], [42.5, -77.5, 0.0], [38.5, -76.5, 0.0], [36.5, -74.5, 0.0], [40.5, -77.5, 0.0], [43.5, -77.5, 0.0], [45.5, -76.5, 0.0], [39.5, -77.5, 0.0], [44.5, -77.5, 0.0], [37.5, -76.5, 0.0], [36.5, -75.5, 0.0], [41.5, -78.5, 0.0], [42.5, -78.5, 0.0], [38.5, -77.5, 0.0], [40.5, -78.5, 0.0], [35.5, -74.5, 0.0], [46.5, -76.5, 0.0], [43.5, -78.5, 0.0], [45.5, -77.5, 0.0], [39.5, -78.5, 0.0], [44.5, -78.5, 0.0], [36.5, -76.5, 0.0], [37.5, -77.5, 0.0], [35.5, -75.5, 0.0], [46.5, -77.5, 0.0], [38.5, -78.5, 0.0], [42.5, -79.5, 0.0], [41.5, -79.5, 0.0], [45.5, -78.5, 0.0], [43.5, -79.5, 0.0], [40.5, -79.5, 0.0], [49.5, -64.5, 0.0], [44.5, -79.5, 0.0], [36.5, -77.5, 0.0], [39.5, -79.5, 0.0], [35.5, -76.5, 0.0], [37.5, -78.5, 0.0], [46.5, -78.5, 0.0], [34.5, -75.5, 0.0], [45.5, -79.5, 0.0], [38.5, -79.5, 0.0], [42.5, -80.5, 0.0], [41.5, -80.5, 0.0], [43.5, -80.5, 0.0], [40.5, -80.5, 0.0], [36.5, -78.5, 0.0], [35.5, -77.5, 0.0], [44.5, -80.5, 0.0], [47.5, -78.5, 0.0], [39.5, -80.5, 0.0], [37.5, -79.5, 0.0], [34.5, -76.5, 0.0], [45.5, -80.5, 0.0], [38.5, -80.5, 0.0], [42.5, -81.5, 0.0], [41.5, -81.5, 0.0], [43.5, -81.5, 0.0], [35.5, -78.5, 0.0], [40.5, -81.5, 0.0], [47.5, -79.5, 0.0], [36.5, -79.5, 0.0], [34.5, -77.5, 0.0], [46.5, -80.5, 0.0], [37.5, -80.5, 0.0], [39.5, -81.5, 0.0], [38.5, -81.5, 0.0], [42.5, -82.5, 0.0], [41.5, -82.5, 0.0], [35.5, -79.5, 0.0], [43.5, -82.5, 0.0], [34.5, -78.5, 0.0], [36.5, -80.5, 0.0], [46.5, -81.5, 0.0], [40.5, -82.5, 0.0], [44.5, -82.5, 0.0], [33.5, -77.5, 0.0], [37.5, -81.5, 0.0], [39.5, -82.5, 0.0], [45.5, -82.5, 0.0], [38.5, -82.5, 0.0], [34.5, -79.5, 0.0], [35.5, -80.5, 0.0], [42.5, -83.5, 0.0], [41.5, -83.5, 0.0], [46.5, -82.5, 0.0], [43.5, -83.5, 0.0], [33.5, -78.5, 0.0], [36.5, -81.5, 0.0], [40.5, -83.5, 0.0], [44.5, -83.5, 0.0], [37.5, -82.5, 0.0], [39.5, -83.5, 0.0], [45.5, -83.5, 0.0], [34.5, -80.5, 0.0], [35.5, -81.5, 0.0], [33.5, -79.5, 0.0], [38.5, -83.5, 0.0], [46.5, -83.5, 0.0], [42.5, -84.5, 0.0], [43.5, -84.5, 0.0], [36.5, -82.5, 0.0], [41.5, -84.5, 0.0], [32.5, -78.5, 0.0], [44.5, -84.5, 0.0], [40.5, -84.5, 0.0], [37.5, -83.5, 0.0], [45.5, -84.5, 0.0], [39.5, -84.5, 0.0], [34.5, -81.5, 0.0], [33.5, -80.5, 0.0], [35.5, -82.5, 0.0], [46.5, -84.5, 0.0], [32.5, -79.5, 0.0], [38.5, -84.5, 0.0], [42.5, -85.5, 0.0], [36.5, -83.5, 0.0], [43.5, -85.5, 0.0], [41.5, -85.5, 0.0], [44.5, -85.5, 0.0], [40.5, -85.5, 0.0], [45.5, -85.5, 0.0], [37.5, -84.5, 0.0], [33.5, -81.5, 0.0], [34.5, -82.5, 0.0], [39.5, -85.5, 0.0], [32.5, -80.5, 0.0], [35.5, -83.5, 0.0], [46.5, -85.5, 0.0], [38.5, -85.5, 0.0], [36.5, -84.5, 0.0], [42.5, -86.5, 0.0], [43.5, -86.5, 0.0], [41.5, -86.5, 0.0], [44.5, -86.5, 0.0], [40.5, -86.5, 0.0], [45.5, -86.5, 0.0], [33.5, -82.5, 0.0], [37.5, -85.5, 0.0], [34.5, -83.5, 0.0], [32.5, -81.5, 0.0], [39.5, -86.5, 0.0], [46.5, -86.5, 0.0], [35.5, -84.5, 0.0], [31.5, -80.5, 0.0], [38.5, -86.5, 0.0], [36.5, -85.5, 0.0], [43.5, -87.5, 0.0], [42.5, -87.5, 0.0], [47.5, -86.5, 0.0], [44.5, -87.5, 0.0], [41.5, -87.5, 0.0], [33.5, -83.5, 0.0], [45.5, -87.5, 0.0], [32.5, -82.5, 0.0], [40.5, -87.5, 0.0], [34.5, -84.5, 0.0], [37.5, -86.5, 0.0], [31.5, -81.5, 0.0], [46.5, -87.5, 0.0], [39.5, -87.5, 0.0], [35.5, -85.5, 0.0], [47.5, -87.5, 0.0], [36.5, -86.5, 0.0], [38.5, -87.5, 0.0], [43.5, -88.5, 0.0], [42.5, -88.5, 0.0], [44.5, -88.5, 0.0], [41.5, -88.5, 0.0], [32.5, -83.5, 0.0], [33.5, -84.5, 0.0], [45.5, -88.5, 0.0], [31.5, -82.5, 0.0], [34.5, -85.5, 0.0], [40.5, -88.5, 0.0], [37.5, -87.5, 0.0], [46.5, -88.5, 0.0], [35.5, -86.5, 0.0], [39.5, -88.5, 0.0], [36.5, -87.5, 0.0], [43.5, -89.5, 0.0], [38.5, -88.5, 0.0], [32.5, -84.5, 0.0], [42.5, -89.5, 0.0], [44.5, -89.5, 0.0], [31.5, -83.5, 0.0], [33.5, -85.5, 0.0], [41.5, -89.5, 0.0], [45.5, -89.5, 0.0], [48.5, -88.5, 0.0], [30.5, -82.5, 0.0], [34.5, -86.5, 0.0], [40.5, -89.5, 0.0], [46.5, -89.5, 0.0], [37.5, -88.5, 0.0], [35.5, -87.5, 0.0], [39.5, -89.5, 0.0], [47.5, -89.5, 0.0], [32.5, -85.5, 0.0], [31.5, -84.5, 0.0], [36.5, -88.5, 0.0], [43.5, -90.5, 0.0], [44.5, -90.5, 0.0], [33.5, -86.5, 0.0], [38.5, -89.5, 0.0], [42.5, -90.5, 0.0], [30.5, -83.5, 0.0], [48.5, -89.5, 0.0], [45.5, -90.5, 0.0], [41.5, -90.5, 0.0], [34.5, -87.5, 0.0], [46.5, -90.5, 0.0], [40.5, -90.5, 0.0], [37.5, -89.5, 0.0], [35.5, -88.5, 0.0], [47.5, -90.5, 0.0], [39.5, -90.5, 0.0], [31.5, -85.5, 0.0], [32.5, -86.5, 0.0], [30.5, -84.5, 0.0], [48.5, -90.5, 0.0], [33.5, -87.5, 0.0], [36.5, -89.5, 0.0], [43.5, -91.5, 0.0], [44.5, -91.5, 0.0], [42.5, -91.5, 0.0], [38.5, -90.5, 0.0], [45.5, -91.5, 0.0], [34.5, -88.5, 0.0], [46.5, -91.5, 0.0], [40.5, -91.5, 0.0], [47.5, -91.5, 0.0], [37.5, -90.5, 0.0], [35.5, -89.5, 0.0], [39.5, -91.5, 0.0], [30.5, -85.5, 0.0], [32.5, -87.5, 0.0], [48.5, -91.5, 0.0], [33.5, -88.5, 0.0], [44.5, -92.5, 0.0], [43.5, -92.5, 0.0], [36.5, -90.5, 0.0], [45.5, -92.5, 0.0], [42.5, -92.5, 0.0], [38.5, -91.5, 0.0], [46.5, -92.5, 0.0], [34.5, -89.5, 0.0], [41.5, -92.5, 0.0], [47.5, -92.5, 0.0], [40.5, -92.5, 0.0], [37.5, -91.5, 0.0], [35.5, -90.5, 0.0], [30.5, -86.5, 0.0], [31.5, -87.5, 0.0], [32.5, -88.5, 0.0], [39.5, -92.5, 0.0], [33.5, -89.5, 0.0], [44.5, -93.5, 0.0], [43.5, -93.5, 0.0], [45.5, -93.5, 0.0], [36.5, -91.5, 0.0], [42.5, -93.5, 0.0], [38.5, -92.5, 0.0], [46.5, -93.5, 0.0], [34.5, -90.5, 0.0], [41.5, -93.5, 0.0], [47.5, -93.5, 0.0], [40.5, -93.5, 0.0], [30.5, -87.5, 0.0], [31.5, -88.5, 0.0], [35.5, -91.5, 0.0], [48.5, -93.5, 0.0], [32.5, -89.5, 0.0], [39.5, -93.5, 0.0], [33.5, -90.5, 0.0], [44.5, -94.5, 0.0], [45.5, -94.5, 0.0], [43.5, -94.5, 0.0], [36.5, -92.5, 0.0], [46.5, -94.5, 0.0], [42.5, -94.5, 0.0], [38.5, -93.5, 0.0], [34.5, -91.5, 0.0], [47.5, -94.5, 0.0], [41.5, -94.5, 0.0], [30.5, -88.5, 0.0], [31.5, -89.5, 0.0], [48.5, -94.5, 0.0], [40.5, -94.5, 0.0], [37.5, -93.5, 0.0], [35.5, -92.5, 0.0], [32.5, -90.5, 0.0], [39.5, -94.5, 0.0], [33.5, -91.5, 0.0], [43.5, -95.5, 0.0], [46.5, -95.5, 0.0], [36.5, -93.5, 0.0], [42.5, -95.5, 0.0], [38.5, -94.5, 0.0], [34.5, -92.5, 0.0], [41.5, -95.5, 0.0], [30.5, -89.5, 0.0], [31.5, -90.5, 0.0], [40.5, -95.5, 0.0], [32.5, -91.5, 0.0], [37.5, -94.5, 0.0], [35.5, -93.5, 0.0], [39.5, -95.5, 0.0], [33.5, -92.5, 0.0], [36.5, -94.5, 0.0], [42.5, -96.5, 0.0], [38.5, -95.5, 0.0], [34.5, -93.5, 0.0], [30.5, -90.5, 0.0], [31.5, -91.5, 0.0], [32.5, -92.5, 0.0], [37.5, -95.5, 0.0], [33.5, -93.5, 0.0], [43.5, -97.5, 0.0], [36.5, -95.5, 0.0], [30.5, -91.5, 0.0], [38.5, -96.5, 0.0], [31.5, -92.5, 0.0], [32.5, -93.5, 0.0], [37.5, -96.5, 0.0], [30.5, -92.5, 0.0], [38.5, -97.5, 0.0], [31.5, -93.5, 0.0], [50.5, -98.5, 0.0], [35.5, -96.5, 0.0], [30.5, -93.5, 0.0], [35.5, -97.5, 0.0], [30.5, -94.5, 0.0], [29.5, -94.5, 0.0], [40.5, -104.5, 0.0], [9.5, -78.5, 0.0], [33.5, -115.5, 0.0], [37.5, -120.5, 0.0]],
                {
  "minOpacity": 0.3,
  "maxZoom": 18,
  "radius": 8,
  "blur": 5,
  "gradient": {
  "0.0": "darkred",
},
}
            );
        
    
            heat_map_53bc0afccbf862f9bfade00b08ea0c97.addTo(map_e24422e03a56ba411a39d3d7d049b382);
        
</script>
</html>